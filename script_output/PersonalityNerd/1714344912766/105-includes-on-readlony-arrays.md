---
title: Output of PersonalityNerd against 105-includes-on-readlony-arrays.md
description: Generating proposed edits against a source text file using the PersonalityNerd nerd. The source text is included, followed by edits generated by the same nerd against three different LLMs.
---

---
title: Use the ts-reset Library to Improve Readonly Array Handling in TypeScript
description: Total TypeScript's ts-reset library features tools to improve the experience of working with readonly arrays and other common TypeScript types.
---

Working with read-only arrays in TypeScript can be slightly annoying, especially when you're working with the `includes` and `indexOf` methods.

Take a simple read-only users array declared with `as const`:

```typescript
const users = ["matt", "sofia", "waqas"] as const;
```

A common operation could be to check whether a certain string matches one of the known values in this array. However, trying to use `includes` or `indexOf` to validate a name against our array will result in an error:

```typescript
users.includes("bryan"); // red squiggly line under bryan
users.indexOf("bryan"); // red squiggly line under bryan
```

This is because TypeScript considers `"bryan"` as not a member of the array.

```typescript
// Hovering over bryan shows:
Argument of type '"bryan"' is not assignable to parameter of type '"matt" | "sofia" | "waqas"'
```

While this specific typing adds predictability for TypeScript, it can be limiting and annoying when compared to behavior you're used to in JavaScript.

## Introducing `ts-reset`

To address this, Total TypeScript's `ts-reset` library can help:

```typescript
import "@total-typescript/ts-reset";
```

This library globally adjusts some of TypeScript's types, including updating arrays to accept any string when using `includes` and `indexOf`:

```typescript
users.includes("bryan"); // No error when `ts-reset` is imported
```

Total TypeScript's `ts-reset` library offers a way of balancing between the strictness and flexibility that TypeScript provides.

While some developers might prefer TypeScript's stricter approach, if you ever find read-only arrays troublesome, this library is a useful addition to your toolkit to make the TypeScript experience smoother.

### Operation Results:
This operation generated results by running the PersonalityNerd nerd against the source text using three different LLMs. The results are as follows:

#### GPT:
```typescript
[Error running GPT: SyntaxError: Unexpected non-whitespace character after JSON at position 1593]
```

#### Anthropic:
```typescript
{
  proposed_edits: [
    {
      existing_text: 'Working with read-only arrays in TypeScript can be slightly annoying',
      proposed_replacement: 'Working with read-only arrays in TypeScript can be a bloody pain in the arse',
      reasoning: 'Spike would likely use more colorful language to express his frustration with the limitations of read-only arrays in TypeScript.',
      confidence: 0.8
    },
    {
      existing_text: "While this specific typing adds predictability for TypeScript, it can be limiting and annoying when compared to behavior you're used to in JavaScript.",
      proposed_replacement: 'While this specific typing adds predictability for TypeScript, it can really cramp your style compared to the wild west of JavaScript.',
      reasoning: 'Spike would probably make a snarky comparison between the strictness of TypeScript and the more freewheeling nature of JavaScript.',
      confidence: 0.7
    },
    {
      existing_text: "To address this, Total TypeScript's `ts-reset` library can help:",
      proposed_replacement: "To slay this particular demon, Total TypeScript's `ts-reset` library rides to the rescue:",
      reasoning: 'Spike often uses metaphors related to fighting and slaying to describe solving problems, so this edit injects some of that personality.',
      confidence: 0.9
    },
    {
      existing_text: "Total TypeScript's `ts-reset` library offers a way of balancing between the strictness and flexibility that TypeScript provides.",
      proposed_replacement: "Total TypeScript's `ts-reset` library is the mystical amulet that brings balance between TypeScript's tight-arsed strictness and loosey-goosey flexibility.",
      reasoning: 'This edit uses more colorful metaphorical language that Spike might employ, while still conveying the core meaning of the original sentence.',
      confidence: 0.85
    }
  ]
}
```

#### Gemini:
```typescript
{
  proposed_edits: [
    {
      existing_text: "Working with read-only arrays in TypeScript can be slightly annoying, especially when you're working with the `includes` and `indexOf` methods.",
      proposed_replacement: "Bloody read-only arrays in TypeScript, am I right?  A real pain in the arse, especially when you're mucking about with `includes` and `indexOf`.",
      reasoning: "This adds a bit of Spike's characteristic snark and informal language to the introduction, making it more engaging and aligned with his personality.",
      confidence: 0.8
    },
    {
      existing_text: "While this specific typing adds predictability for TypeScript, it can be limiting and annoying when compared to behavior you're used to in JavaScript.",
      proposed_replacement: "Yeah, yeah, predictability and all that rot.  But let's be honest, it's a right pain in the neck compared to the good old days of JavaScript, where you could do what you liked.",
      reasoning: "This edit injects Spike's voice by expressing annoyance with TypeScript's strictness and a preference for the flexibility of JavaScript.",
      confidence: 0.9
    },
    {
      existing_text: "To address this, Total TypeScript's `ts-reset` library can help:",
      proposed_replacement: "Right, so here's the deal.  This `ts-reset` library, it's like a stake through the heart of this problem.",
      reasoning: "This edit uses a vampire-related metaphor to introduce the solution, aligning with Spike's background and adding a touch of dark humor.",
      confidence: 0.7
    },
    {
      existing_text: "This library globally adjusts some of TypeScript's types, including updating arrays to accept any string when using `includes` and `indexOf`:",
      proposed_replacement: "This little beauty goes and messes with TypeScript's head, making those arrays accept any string you throw at 'em with `includes` and `indexOf`.  No more fuss.",
      reasoning: "This edit uses more informal language and a slightly aggressive tone to describe the library's functionality, reflecting Spike's personality.",
      confidence: 0.8
    },
    {
      existing_text: "Total TypeScript's `ts-reset` library offers a way of balancing between the strictness and flexibility that TypeScript provides.",
      proposed_replacement: "So, if you're tired of TypeScript's rules and regulations, this library's your ticket to a bit of freedom.  Just don't go blaming me if you end up in a mess.",
      reasoning: "This edit adds a warning and a sense of rebelliousness, aligning with Spike's character and his tendency to challenge authority.",
      confidence: 0.9
    }
  ]
}
```