---
title: Output of CodeSnippetTunerNerd against 105-includes-on-readlony-arrays.md
description: Generating proposed edits against a source text file using the CodeSnippetTunerNerd nerd. The source text is included, followed by edits generated by the same nerd against three different LLMs.
---

---
title: Use the ts-reset Library to Improve Readonly Array Handling in TypeScript
description: Total TypeScript's ts-reset library features tools to improve the experience of working with readonly arrays and other common TypeScript types.
---

Working with read-only arrays in TypeScript can be slightly annoying, especially when you're working with the `includes` and `indexOf` methods.

Take a simple read-only users array declared with `as const`:

```typescript
const users = ["matt", "sofia", "waqas"] as const;
```

A common operation could be to check whether a certain string matches one of the known values in this array. However, trying to use `includes` or `indexOf` to validate a name against our array will result in an error:

```typescript
users.includes("bryan"); // red squiggly line under bryan
users.indexOf("bryan"); // red squiggly line under bryan
```

This is because TypeScript considers `"bryan"` as not a member of the array.

```typescript
// Hovering over bryan shows:
Argument of type '"bryan"' is not assignable to parameter of type '"matt" | "sofia" | "waqas"'
```

While this specific typing adds predictability for TypeScript, it can be limiting and annoying when compared to behavior you're used to in JavaScript.

## Introducing `ts-reset`

To address this, Total TypeScript's `ts-reset` library can help:

```typescript
import "@total-typescript/ts-reset";
```

This library globally adjusts some of TypeScript's types, including updating arrays to accept any string when using `includes` and `indexOf`:

```typescript
users.includes("bryan"); // No error when `ts-reset` is imported
```

Total TypeScript's `ts-reset` library offers a way of balancing between the strictness and flexibility that TypeScript provides.

While some developers might prefer TypeScript's stricter approach, if you ever find read-only arrays troublesome, this library is a useful addition to your toolkit to make the TypeScript experience smoother.

### Operation Results:
This operation generated results by running the CodeSnippetTunerNerd nerd against the source text using three different LLMs. The results are as follows:

#### GPT:
```typescript
{
  proposed_edits: [
    {
      existing_text: 'users.includes("bryan"); // red squiggly line under bryan\n' +
        'users.indexOf("bryan"); // red squiggly line under bryan',
      proposed_replacement: `users.includes("bryan"); // TypeScript error: Argument of type '"bryan"' is not assignable to parameter of type '"matt" | "sofia" | "waqas"'.\n` +
        `users.indexOf("bryan"); // TypeScript error: Argument of type '"bryan"' is not assignable to parameter of type '"matt" | "sofia" | "waqas"'.`,
      reasoning: "The original comment 'red squiggly line under bryan' is vague and does not provide specific information about the TypeScript error. The proposed edit adds the exact error message, which clarifies the nature of the TypeScript issue and enhances understanding for the reader.",
      confidence: 0.95
    }
  ]
}
```

#### Anthropic:
```typescript
{
  proposed_edits: [
    {
      existing_text: 'const users = ["matt", "sofia", "waqas"] as const;',
      proposed_replacement: 'const users = ["matt", "sofia", "waqas"] as const; // Declare a read-only array of user names',
      reasoning: 'Adding a comment to explain what the code is doing will help readers understand the purpose of declaring the array as read-only.',
      confidence: 0.8
    },
    {
      existing_text: 'users.includes("bryan"); // red squiggly line under bryan',
      proposed_replacement: `users.includes("bryan"); // Error: Argument of type '"bryan"' is not assignable to parameter of type '"matt" | "sofia" | "waqas"'`,
      reasoning: 'Updating the comment to show the actual TypeScript error message will help clarify why this line fails to compile.',
      confidence: 0.9
    },
    {
      existing_text: 'import "@total-typescript/ts-reset";',
      proposed_replacement: `import "@total-typescript/ts-reset"; // Import the ts-reset library to adjust TypeScript's default behavior`,
      reasoning: 'Adding a comment to explain the purpose of the import statement will help readers understand why the library is being used.',
      confidence: 0.85
    },
    {
      existing_text: 'users.includes("bryan"); // No error when `ts-reset` is imported',
      proposed_replacement: 'users.includes("bryan"); // No error: ts-reset allows any string to be used with includes and indexOf',
      reasoning: 'Updating the comment to more clearly explain how ts-reset changes the behavior will help readers understand the benefit of using the library.',
      confidence: 0.95
    }
  ]
}
```

#### Gemini:
```typescript
{
  proposed_edits: [
    {
      existing_text: 'users.includes("bryan"); // red squiggly line under bryan',
      proposed_replacement: "// The following line would have a red squiggly line under 'bryan' if not for the ts-reset import\n" +
        'users.includes("bryan");',
      reasoning: 'The comment should reflect that the code is only valid because of the library that is being introduced in the document.',
      confidence: 0.9
    }
  ]
}
```